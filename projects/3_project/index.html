<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Machine Learning for survival analysis | Sahir Bhatnagar </title> <meta name="author" content="Sahir Bhatnagar"> <meta name="description" content="Variable selection and absolute risk estimation for time-to-event outcomes using machine learning"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://sahirbhatnagar.com/assets/css/fontawesome-all.min.css"> <link rel="stylesheet" href="https://sahirbhatnagar.com/assets/css/academicons.min.css"> <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;700&amp;display=swap" rel="stylesheet"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sahirbhatnagar.com/projects/3_project/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Sahir </span> Bhatnagar </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/software/">software </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/talks/">talks </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Machine Learning for survival analysis</h1> <p class="post-description">Variable selection and absolute risk estimation for time-to-event outcomes using machine learning</p> </header> <article> <p>Traditional survival analysis approaches like Cox regression focus on hazard ratios and often rely on time-matching or risk-set sampling, which removes the baseline hazard from the estimating equations. This makes it cumbersome to report or visualize absolute risks and survival curves because a second step is required to separately estimate the baseline hazard. To overcome these limitations, we developped the casebase framework <a class="citation" href="#bhatnagar2022casebase">(Bhatnagar et al., 2022)</a>, which extends the Hanley &amp; Miettinen (2009) approach for fitting fully parametric hazard models and covariate-conditional survival curves using the familiar interface of the glm function. Our implementation includes extensions to other models such as penalized regression for variable selection and competing risk analysis. In addition, we provide functions for exploratory data analysis and visualizing the estimated quantities such as the hazard function, survival curve, and their standard errors. The ultimate goal of our package is to make fitting flexible hazards accessible to end users who favor reporting absolute risks and survival curves over hazard ratios. The package is available on <a href="https://sahirbhatnagar.com/casebase/">CRAN and GitHub</a>.</p> <p>We applied casebase to the European Randomized Study of Prostate Cancer Screening (ERSPC) dataset to investigate the differences in prostate cancer risk between the control and screening arms. Previous re-analyses of these data suggest that the 20% reduction in prostate cancer death due to screening was an underestimate. The estimated 20% (from a proportional hazards model) did not account for the delay between screening and the time the effect is expected to be observed. As a result, the null effects in years 1–7 masked the substantial reductions that began to appear from year 8 onward. This motivates the use of a time-dependent hazard ratio which can easily be fit with the casebase package by including an interaction term with time in the model. We fit a flexible hazard by using a smooth function of time modeled with a penalized cubic spline basis with 2 degrees of freedom (implemented in the survival::pspline function). The resulting time-dependent hazard ratio is shown in Figure 1.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/casebase_hazard-480.webp 480w,/assets/img/casebase_hazard-800.webp 800w,/assets/img/casebase_hazard-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/casebase_hazard.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Application of casebase to the European Randomized Study of Prostate Cancer Screening (ERSPC) dataset. Shown is the estimated hazard ratio and 95% confidence interval for screening vs. control group as a function of time. Hazard ratios are estimated from fitting a parametric hazard model as a function of the interaction between a cubic pspline basis (df=2) of follow-up time and treatment arm. 95% confidence intervals are calculated using the delta method. The plot shows that the effect of screening only begins to become statistically apparent by year 7. The 25-60% reductions seen in years 8-12 of the study suggests a much higher reduction in prostate cancer due to screening than the single overall 20% reported in the original article. </div> <p>Recognizing that non-linear and high-order covariate interactions often underlie complex disease processes, my PhD student, Jesse Islam, led the development of Case-Base Neural Networks (CBNNs) <a class="citation" href="#islam2024case">(Islam et al., 2024)</a> as a new approach that combines the case-base sampling framework with flexible neural network architectures. Using a novel sampling scheme and data augmentation to naturally account for censoring, we construct a feed-forward neural network that includes time as an input (Figure 2). Our results highlight the benefit of combining case-base sampling with deep learning to provide a simple and flexible framework for data-driven modeling of single event survival outcomes that estimates time-varying effects and a complex baseline hazard by design. An R package is available at <a href="https://github.com/Jesse-Islam/cbnn" rel="external nofollow noopener" target="_blank">https://github.com/Jesse-Islam/cbnn</a>.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cbnn_plot-480.webp 480w,/assets/img/cbnn_plot-800.webp 800w,/assets/img/cbnn_plot-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/cbnn_plot.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Methodological steps involved in CBNN. The first step, case-base sampling, is completed before training begins. Then, we pass this sampled data through a feed-forward neural network, add an offset to adjust for the bias inherent in case-base sampling and apply a sigmoid activation function to estimate a probability. Once the neural network model completes its training, we can convert the probability to a hazard for the survival outcome of interest. </div> <p>Beyond standard tabular data, imaging has become integral to many clinical prognoses. Led by my PhD student Anthony Bozzo, we built a multimodal neural network (MMNN) that processes both clinical variables and magnetic resonance imaging (MRI) slices from soft tissue sarcoma (STS) patients <a class="citation" href="#bozzo2024multimodal">(Bozzo et al., 2024)</a>. By employing gradient blending, the network merges two sub-models—one handling 3D T1/T2 MRI volumes, the other handling clinical features—so that they can converge optimally without overfitting (Figure 3). Compared to unimodal and classical radiomics models, the MMNN exhibited superior performance for predicting overall survival and risk of distant metastases (C-index 0.77 and 0.70, respectively). Heat maps of salient image features provided clinically meaningful insights into regions of the tumor that drive the model’s predictions. This framework underscores the promise of end-to-end deep learning for integrating imaging and clinical data in complex survival tasks.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nn-480.webp 480w,/assets/img/nn-800.webp 800w,/assets/img/nn-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/nn.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Architecture of our multimodal neural network model. A deep neural network (A) will interpret the 11 clinical variables and a 2-channel convolutional neural network (DenseNet-121) analyzes the MRI input (B). Source: <a class="citation" href="#bozzo2024multimodal">(Bozzo et al., 2024)</a>. </div> </article> <h2>References</h2> <div class="publications"> <h2 class="bibliography">2024</h2> <ol class="bibliography"> <li><div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/publication_preview/mla-480.webp 480w,/assets/img/publication_preview/mla-800.webp 800w,/assets/img/publication_preview/mla-1400.webp 1400w," sizes="200px" type="image/webp"> <img src="/assets/img/publication_preview/mla.jpg" class="preview z-depth-1 rounded" width="100%" height="auto" alt="mla.jpg" data-zoomable onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </source></picture> </figure> </div> <div id="islam2024case" class="col-sm-8"> <div class="title">Case-Base Neural Network: Survival analysis with time-varying, higher-order interactions</div> <div class="author"> Jesse Islam, Maxime Turgeon, Robert Sladek, and <em>Sahir Bhatnagar</em> </div> <div class="periodical"> <em>Machine Learning with Applications</em>, 2024 </div> <div class="periodical"> </div> <div class="links"> <a href="https://doi.org/10.1016/j.mlwa.2024.100535" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">DOI</a> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> <a href="/assets/pdf/cbnn.pdf" class="btn btn-sm z-depth-0" role="button">PDF</a> <a href="https://github.com/Jesse-Islam/cbnn" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">Code</a> </div> <div class="badges"> <span class="altmetric-embed" data-badge-type="2" data-badge-popover="right" data-doi="10.1016/j.mlwa.2024.100535"></span> <a href="https://scholar.google.com/citations?view_op=view_citation&amp;hl=en&amp;user=9XJum2AAAAAJ&amp;citation_for_view=9XJum2AAAAAJ:a0OBvERweLwC" aria-label="Google Scholar link" role="button" rel="external nofollow noopener" target="_blank"> <img src="https://img.shields.io/badge/scholar-1-4285F4?logo=googlescholar&amp;labelColor=beige" alt="1 Google Scholar citations"> </a> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">islam2024case</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Case-Base Neural Network: Survival analysis with time-varying, higher-order interactions}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Islam, Jesse and Turgeon, Maxime and Sladek, Robert and Bhatnagar, Sahir}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{Machine Learning with Applications}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{16}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{100535}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2024}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{Elsevier}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1016/j.mlwa.2024.100535}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div></li> <li><div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/publication_preview/npj_onc-480.webp 480w,/assets/img/publication_preview/npj_onc-800.webp 800w,/assets/img/publication_preview/npj_onc-1400.webp 1400w," sizes="200px" type="image/webp"> <img src="/assets/img/publication_preview/npj_onc.jpg" class="preview z-depth-1 rounded" width="100%" height="auto" alt="npj_onc.jpg" data-zoomable onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </source></picture> </figure> </div> <div id="bozzo2024multimodal" class="col-sm-8"> <div class="title">A multimodal neural network with gradient blending improves predictions of survival and metastasis in sarcoma</div> <div class="author"> Anthony Bozzo, Alex Hollingsworth, Subrata Chatterjee, Aditya Apte, Jiawen Deng, Simon Sun, William Tap, Ahmed Aoude, <em>Sahir Bhatnagar</em>, and John H Healey </div> <div class="periodical"> <em>npj Precision Oncology</em>, 2024 </div> <div class="periodical"> </div> <div class="links"> <a href="https://doi.org/10.1038/s41698-024-00695-7" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">DOI</a> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> <a href="/assets/pdf/npj_2024.pdf" class="btn btn-sm z-depth-0" role="button">PDF</a> </div> <div class="badges"> <span class="altmetric-embed" data-badge-type="2" data-badge-popover="right" data-doi="10.1038/s41698-024-00695-7"></span> <a href="https://scholar.google.com/citations?view_op=view_citation&amp;hl=en&amp;user=9XJum2AAAAAJ&amp;citation_for_view=9XJum2AAAAAJ:1sJd4Hv_s6UC" aria-label="Google Scholar link" role="button" rel="external nofollow noopener" target="_blank"> <img src="https://img.shields.io/badge/scholar-1-4285F4?logo=googlescholar&amp;labelColor=beige" alt="1 Google Scholar citations"> </a> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@article</span><span class="p">{</span><span class="nl">bozzo2024multimodal</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{A multimodal neural network with gradient blending improves predictions of survival and metastasis in sarcoma}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Bozzo, Anthony and Hollingsworth, Alex and Chatterjee, Subrata and Apte, Aditya and Deng, Jiawen and Sun, Simon and Tap, William and Aoude, Ahmed and Bhatnagar, Sahir and Healey, John H}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{npj Precision Oncology}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{8}</span><span class="p">,</span>
  <span class="na">number</span> <span class="p">=</span> <span class="s">{1}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{188}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2024}</span><span class="p">,</span>
  <span class="na">publisher</span> <span class="p">=</span> <span class="s">{Nature Publishing Group UK London}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1038/s41698-024-00695-7}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div></li> </ol> <h2 class="bibliography">2022</h2> <ol class="bibliography"><li><div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/publication_preview/rlogo-480.webp 480w,/assets/img/publication_preview/rlogo-800.webp 800w,/assets/img/publication_preview/rlogo-1400.webp 1400w," sizes="200px" type="image/webp"> <img src="/assets/img/publication_preview/rlogo.png" class="preview z-depth-1 rounded" width="100%" height="auto" alt="rlogo.png" data-zoomable onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </source></picture> </figure> </div> <div id="bhatnagar2022casebase" class="col-sm-8"> <div class="title">casebase: An Alternative Framework for Survival Analysis and Comparison of Event Rates</div> <div class="author"> <em>Sahir Bhatnagar</em>, Maxime Turgeon, Jesse Islam, James A. Hanley, and Olli Saarela </div> <div class="periodical"> <em>The R Journal</em>, 2022 </div> <div class="periodical"> </div> <div class="links"> <a href="https://doi.org/10.32614/RJ-2022-052" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">DOI</a> <a href="/assets/pdf/rj_2022.pdf" class="btn btn-sm z-depth-0" role="button">PDF</a> <a href="https://sahirbhatnagar.com/casebase/" class="btn btn-sm z-depth-0" role="button">Code</a> </div> <div class="badges"> <span class="altmetric-embed" data-badge-type="2" data-badge-popover="right" data-doi="10.32614/RJ-2022-052"></span> <a href="https://scholar.google.com/citations?view_op=view_citation&amp;hl=en&amp;user=9XJum2AAAAAJ&amp;citation_for_view=9XJum2AAAAAJ:uWQEDVKXjbEC" aria-label="Google Scholar link" role="button" rel="external nofollow noopener" target="_blank"> <img src="https://img.shields.io/badge/scholar-6-4285F4?logo=googlescholar&amp;labelColor=beige" alt="6 Google Scholar citations"> </a> </div> </div> </div></li></ol> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Sahir Bhatnagar. Powered by <a href="http://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>, <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a>, <a href="http://daringfireball.net/projects/markdown/" rel="external nofollow noopener" target="_blank">markdown</a>, <a href="https://cran.r-project.org/" rel="external nofollow noopener" target="_blank">R</a>, <a href="http://yihui.name/knitr/" rel="external nofollow noopener" target="_blank">knitr</a>, <a href="http://johnmacfarlane.net/pandoc/" rel="external nofollow noopener" target="_blank">pandoc</a>, <a href="https://github.com/mozilla/Fira" rel="external nofollow noopener" target="_blank">Fira</a> and <a href="https://github.com/sahirbhatnagar/sahirbhatnagar.github.io" rel="external nofollow noopener" target="_blank">GitHub</a> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script type="text/javascript">$(function(){$('[data-toggle="tooltip"]').tooltip()});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?8664456308d8a0b76907c75d01dd1dbf" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-60189402-1"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-60189402-1");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>